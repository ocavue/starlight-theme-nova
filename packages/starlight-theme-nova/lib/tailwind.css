@import 'tailwindcss';

@source '../src/**/*.ts';
@source '../src/**/*.astro';

:root,
::backdrop {
  --sl-content-width: 50rem;

  --sl-text-h1: var(--sl-text-3xl);
  --sl-text-h2: var(--sl-text-2xl);
  --sl-text-h3: var(--sl-text-xl);
  --sl-text-h4: var(--sl-text-lg);
  --sl-text-h5: var(--sl-text-base);
  --sl-text-h6: var(--sl-text-sm);

  /* Prevent adjustments of font size after orientation changes in iOS. */
  -webkit-text-size-adjust: 100%;
}

/* Dark mode Starlight theme variables. */
:root {
  --sl-color-white: white;
  --sl-color-gray-1: var(--color-gray-200);
  --sl-color-gray-2: var(--color-gray-300);
  --sl-color-gray-3: var(--color-gray-400);
  --sl-color-gray-4: var(--color-gray-600);
  --sl-color-gray-5: var(--color-gray-700);
  --sl-color-gray-6: var(--color-gray-800);
  --sl-color-black: var(--color-gray-950);

  --sl-color-accent-low: var(--color-gray-950);
  --sl-color-accent: var(--color-gray-600);
  --sl-color-accent-high: var(--color-gray-100);

  --sl-color-bg-inline-code: var(--color-gray-800);
  --sl-color-border-inline-code: var(--color-gray-700);
  --sl-color-bg-nav: color-mix(in oklch, var(--color-gray-950) 50%, transparent);

  --sl-color-orange-low: var(--color-amber-950);
  --sl-color-orange: var(--color-amber-900);
  --sl-color-orange-high: var(--color-amber-200);

  --sl-color-green-low: var(--color-green-950);
  --sl-color-green: var(--color-green-900);
  --sl-color-green-high: var(--color-green-200);

  --sl-color-blue-low: var(--color-blue-950);
  --sl-color-blue: var(--color-blue-900);
  --sl-color-blue-high: var(--color-blue-200);

  --sl-color-purple-low: var(--color-purple-950);
  --sl-color-purple: var(--color-purple-900);
  --sl-color-purple-high: var(--color-purple-200);

  --sl-color-red-low: var(--color-red-950);
  --sl-color-red: var(--color-red-900);
  --sl-color-red-high: var(--color-red-200);

  --nano-color-highlight: var(--sl-color-gray-5);
}

/* Light mode Starlight theme variables */
:root[data-theme='light'] {
  --sl-color-white: var(--color-gray-900);
  --sl-color-gray-1: var(--color-gray-800);
  --sl-color-gray-2: var(--color-gray-700);
  --sl-color-gray-3: var(--color-gray-500);
  --sl-color-gray-4: var(--color-gray-400);
  --sl-color-gray-5: var(--color-gray-300);
  --sl-color-gray-6: var(--color-gray-200);
  --sl-color-gray-7: var(--color-gray-100);
  --sl-color-black: white;

  --sl-color-accent-low: var(--color-gray-200);
  --sl-color-accent: var(--color-gray-800);
  --sl-color-accent-high: var(--color-gray-900);

  --sl-color-bg-inline-code: var(--color-gray-100);
  --sl-color-border-inline-code: var(--color-gray-300);
  --sl-color-bg-nav: color-mix(in oklch, var(--color-white) 80%, transparent);

  --sl-color-orange-low: var(--color-amber-100);
  --sl-color-orange: var(--color-amber-400);
  --sl-color-orange-high: var(--color-amber-800);

  --sl-color-green-low: var(--color-green-100);
  --sl-color-green: var(--color-green-400);
  --sl-color-green-high: var(--color-green-800);

  --sl-color-blue-low: var(--color-blue-100);
  --sl-color-blue: var(--color-blue-400);
  --sl-color-blue-high: var(--color-blue-800);

  --sl-color-purple-low: var(--color-purple-100);
  --sl-color-purple: var(--color-purple-400);
  --sl-color-purple-high: var(--color-purple-800);

  --sl-color-red-low: var(--color-red-100);
  --sl-color-red: var(--color-red-400);
  --sl-color-red-high: var(--color-red-800);

  --nano-color-highlight: var(--sl-color-gray-6);
}

.nova-page-frame {
  @apply flex min-h-screen flex-col;
}

.nova-page-frame-header {
  @apply box-border border-0 border-b border-solid border-(--sl-color-hairline);
  @apply bg-(--sl-color-bg-nav) backdrop-blur;
  @apply fixed inset-0 w-full;
  @apply z-(--sl-z-index-navbar) h-(--sl-nav-height);
  @apply px-(--sl-nav-pad-x) py-(--sl-nav-pad-y);
}

.nova-nav-link {
  @apply -m-1.5 rounded-md p-1.5 focus-visible:outline-offset-0;
}

.nova-site-title {
  @apply **:text-lg **:font-semibold **:text-(--sl-color-text);
  @apply -m-1.5 rounded-md p-1.5 focus-visible:outline-offset-0;
}

.nova-header {
  @apply box-border flex h-full items-center gap-2;
}

.nova-header-title {
  /* Prevent long titles overflowing and covering the search and menu buttons on narrow viewports. */
  @apply overflow-clip;
  /* Avoid clipping focus ring around link inside title wrapper. */
  @apply -m-3 p-3;
  @apply min-w-0;
  @apply flex;
}

.nova-header-nav {
  @apply flex flex-1 flex-row;
  @apply gap-4 py-3 pr-4 pl-4 xl:gap-6 xl:pl-6;
  @apply text-sm font-medium;
  @apply overflow-x-auto max-md:**:hidden;
}

.nova-header-nav-link {
  @apply text-(--sl-color-gray-3) no-underline hover:text-(--sl-color-white);
  @apply -m-1.5 rounded-md p-1.5 focus-visible:outline-offset-0;
}

.nova-header-search {
  @apply flex md:max-w-60 md:flex-1 print:hidden;
}

.nova-header-actions-lg {
  @apply hidden items-center gap-2 md:flex print:hidden;
}

.nova-header-actions-sm {
  @apply flex items-center gap-2 md:hidden print:hidden;
}

.nova-search-button {
  @apply flex size-8 rounded-md p-2 text-(--sl-color-text) hover:bg-gray-400/30;
  @apply transition active:scale-90;
  @apply focus-visible:outline-offset-1;

  @apply flex md:h-9 md:w-full md:max-w-88 md:rounded-md md:p-2 md:text-(--sl-color-text) md:hover:bg-gray-400/10;
  @apply md:transition-colors;
  @apply md:border md:border-solid md:border-(--sl-color-gray-5);
}

.nova-mobile-menu-footer {
  @apply flex items-center justify-end gap-2 py-4 print:hidden;
}

.nova-code-copy-button {
  @apply absolute top-2 right-2 m-0 size-6 rounded border border-solid border-(--sl-color-gray-5) bg-gray-100/30 p-1 text-black backdrop-blur-sm hover:bg-gray-200/50 dark:bg-gray-600/30 dark:text-white hover:dark:bg-gray-500/50;
  @apply transition active:scale-90;
}

.nova-code-title {
  @apply hidden border-b border-solid border-b-(--sl-color-gray-5) bg-(--sl-color-bg) px-4 py-2 font-mono text-sm text-(--sl-color-gray-3) [div[data-nova-code-container][data-nova-code-title]_&]:block;
}

.nova-code-container {
  @apply relative overflow-hidden [&_pre]:relative;
  @apply [&_.nova-code-copy-button]:opacity-0 [&:hover_.nova-code-copy-button]:opacity-100;
  @apply border border-solid border-(--sl-color-gray-5);
  @apply rounded-md;
}

.sl-markdown-content .nova-code-container pre.astro-code,
.sl-markdown-content .nova-code-container pre.astro-code code {
  border-width: 0;
  border-style: solid;
  border-color: transparent;
  border-radius: 0;
}

.nova-theme-select {
  @apply size-8 overflow-visible;
}

.nova-icon-button {
  @apply flex size-8 rounded-md p-2 text-(--sl-color-text) hover:bg-gray-400/30;
  @apply transition active:scale-90;
  @apply focus-visible:outline-offset-1;
}

.nova-page-frame-sidebar-pane {
  @apply visible border-0 border-solid border-(--sl-color-hairline) md:border-r;
  @apply invisible md:visible [body[data-mobile-menu-expanded]_&]:max-md:visible;
  @apply max-md:w-full md:w-(--sl-sidebar-width);
}

.nova-link-card {
  @apply relative flex flex-col gap-2 rounded-xl px-5 py-4;
  @apply shadow-sm hover:shadow-md;
  @apply border border-solid border-(--sl-color-gray-5);
  @apply bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700;
  @apply text-gray-700 dark:text-gray-200;
  @apply transition active:scale-99;
}

.nova-link-card-link {
  @apply inline-flex items-center justify-between text-lg font-semibold text-gray-700 no-underline dark:text-gray-200;
  /* a11y fix for https://github.com/withastro/starlight/issues/487 */
  @apply before:absolute before:inset-0 before:content-[''];
}

.nova-link-button {
  @apply me-2 mt-2 mb-2 inline-flex items-center justify-between gap-2 rounded-xl px-6 py-3;
  @apply border border-solid border-transparent no-underline;
  @apply font-medium;
  @apply transition active:scale-97;
}

.nova-link-button-primary {
  @apply bg-black hover:bg-gray-800 dark:bg-gray-100 dark:hover:bg-gray-300;
  @apply shadow-sm hover:shadow-md;
  @apply text-white dark:text-gray-900;
}

.nova-link-button-secondary {
  @apply border-(--sl-color-gray-5);
  @apply bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700;
  @apply shadow-sm hover:shadow-md;
  @apply text-gray-700 dark:text-gray-200;
}

.nova-link-button-minimal {
  @apply text-gray-700 dark:text-gray-200;
}

.nova-pagination {
  @apply flex min-w-full flex-row items-stretch justify-between gap-2 px-1 pt-0 pb-6;
}

.nova-pagination-divider {
  @apply flex-1;
}

.nova-pagination-link {
  @apply m-0 flex items-center justify-end gap-2 rounded-xl p-2;
  @apply font-medium text-(--sl-color-gray-2) no-underline hover:text-(--sl-color-white) md:text-lg;
  @apply transition;
  @apply [[rel="prev"]]:flex-row-reverse;
  @apply [[rel="next"]]:flex-row;
}

.nova-mobile-table-of-contents {
  @apply [&_nav]:backdrop-blur [&_summary]:border-b-(--sl-color-hairline);
}
